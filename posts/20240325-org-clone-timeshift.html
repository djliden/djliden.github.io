<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Making headings for recurring tasks in org mode</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/org-base.css"/>
<link rel="stylesheet" type="text/css" href="/orgstyle.css"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="me" href="https://emacs.ch/@dliden">
<link rel="alternate" type="application/rss+xml" title="Daniel Liden's Blog" href="/rss.xml">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="/dark-mode.js" defer></script>
<script src="/admonitions.js" defer></script>
<link rel="canonical" href="https://danliden.com/posts/20240325-org-clone-timeshift.html">
<meta name="author" content="Daniel Liden">
<meta property="og:url" content="https://danliden.com/posts/20240325-org-clone-timeshift.html">
<meta property="og:title" content="Making headings for recurring tasks in org mode">
<meta property="og:description" content="This short post shows how to use the ~org-clone-subtree-with-time-shift~ command to make org headings for recurring tasks. I was recently trying to add a five-week class to my org agenda and I didn...">
<meta property="og:site_name" content="Daniel Liden">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-03-25T00:00:00Z">
<meta property="article:modified_time" content="2025-10-02T14:22:16Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Making headings for recurring tasks in org mode">
<meta name="twitter:description" content="This short post shows how to use the ~org-clone-subtree-with-time-shift~ command to make org headings for recurring tasks. I was recently trying to add a five-week class to my org agenda and I didn...">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Making headings for recurring tasks in org mode","description":"This short post shows how to use the ~org-clone-subtree-with-time-shift~ command to make org headings for recurring tasks. I was recently trying to add a five-week class to my org agenda and I didn...","mainEntityOfPage":{"@type":"WebPage","@id":"https://danliden.com/posts/20240325-org-clone-timeshift.html"},"author":{"@type":"Person","name":"Daniel Liden"},"datePublished":"2024-03-25T00:00:00Z","dateModified":"2025-10-02T14:22:16Z"}</script>
</head>
<body>
<div id="preamble" class="status">
<hr class="topnav-rule">
<header class="site-header">
  <a href="/index.html" class="site-header__brand">
    <h2>Daniel Liden</h2>
  </a>
  <nav class="topnav-links" aria-label="Primary">
    <a href="/archive.html">Blog</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a href="/about.html">About Me</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a href="/photos.html">Photos</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a href="/notebooks/">Notebooks</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a href="/notes.html">Notes</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a class="topnav-icon" href="/rss.xml" aria-label="RSS feed">
      <svg class="rss-icon" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 4h1a14 14 0 0 1 14 14v1"/>
        <path d="M5 11h1a7 7 0 0 1 7 7v1"/>
        <circle cx="6" cy="18" r="2"/>
      </svg>
    </a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <button id="theme-toggle" class="nav-theme-toggle topnav-icon" type="button" aria-label="Switch to dark mode" aria-pressed="false">
      <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" fill="currentColor">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"/>
      </svg>
    </button>
  </nav>
</header>
<hr class="topnav-rule">
</div>
<div id="content" class="content">
<header>
<h1 class="title">Making headings for recurring tasks in org mode</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org9e46a26">How it works</a></li>
<li><a href="#org9103a48">Limitations</a></li>
<li><a href="#orgf8ac825">Further reading</a></li>
</ul>
</div>
</nav>
<div class="preview" id="orge07bb53">
<p>
This short post shows how to use the <code>org-clone-subtree-with-time-shift</code> command to make org headings for recurring tasks. I was recently trying to add a five-week class to my org agenda and I didn't want to manually create each heading and add or modify the timestamp. This approach made it very easy.
</p>

</div>

<div id="outline-container-org9e46a26" class="outline-2">
<h2 id="org9e46a26">How it works</h2>
<div class="outline-text-2" id="text-org9e46a26">
<p>
Suppose I have an org mode heading representing a scheduled event, like a class:
</p>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-03-26 Tue&gt;</span>
</pre>
</div>

<p>
Now suppose this class is scheduled weekly for the next five weeks. We don't necessarily want to manually copy the heading and manually update each timestamp (though, admittedly, it would only take a minute or two). This is where <code>org-clone-subtree-with-time-shift</code> comes in.
</p>

<p>
When we invoke this function with the cursor on the first heading, we will be prompted for (1) the number of clones to create and (2) the time shift we want to use. In this example, we specify 4 clones (for a total of 5 headings) and a <code>+1w</code> time shift, to shift each heading by one week. 
</p>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-03-26 Tue&gt;</span>
<span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-04-02 Tue&gt;</span>
<span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-04-09 Tue&gt;</span>
<span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-04-16 Tue&gt;</span>
<span class="org-org-level-1">* Class</span>
<span class="org-org-special-keyword">SCHEDULED:</span> <span class="org-org-date">&lt;2024-04-23 Tue&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9103a48" class="outline-2">
<h2 id="org9103a48">Limitations</h2>
<div class="outline-text-2" id="text-org9103a48">
<p>
In some cases, you may want to change the names of the headers somewhat (such as by adding a counter; class 1, class 2, etc.). There are many different approaches to handle this programmatically, but it's beyond the scope of this short post. In this case, it takes just a few seconds to add a class number to each heading manually.
</p>
</div>
</div>

<div id="outline-container-orgf8ac825" class="outline-2">
<h2 id="orgf8ac825">Further reading</h2>
<div class="outline-text-2" id="text-orgf8ac825">
<p>
Most helpfully, here is the documenation from <code>C-h f org-clone-subtree-with-time-shift</code>:
</p>

<blockquote>
<p>
org-clone-subtree-with-time-shift is an interactive Lisp closure in
‘org.el’.
</p>

<p>
It is bound to C-c C-x c.
</p>

<p>
(org-clone-subtree-with-time-shift N &amp;optional SHIFT)
</p>

<p>
Clone the task (subtree) at point N times.
The clones will be inserted as siblings.
</p>

<p>
In interactive use, the user will be prompted for the number of
clones to be produced.  If the entry has a timestamp, the user
will also be prompted for a time shift, which may be a repeater
as used in time stamps, for example ‘+3d’.  To disable this,
you can call the function with a universal prefix argument.
</p>

<p>
When a valid repeater is given and the entry contains any time
stamps, the clones will become a sequence in time, with time
stamps in the subtree shifted for each clone produced.  If SHIFT
is nil or the empty string, time stamps will be left alone.  The
ID property of the original subtree is removed.
</p>

<p>
In each clone, all the CLOCK entries will be removed.  This
prevents Org from considering that the clocked times overlap.
</p>

<p>
If the original subtree did contain time stamps with a repeater,
the following will happen:
</p>
<ul class="org-ul">
<li>the repeater will be removed in each clone</li>
<li>an additional clone will be produced, with the current, unshifted
date(s) in the entry.</li>
<li>the original entry will be placed <b>after</b> all the clones, with
repeater intact.</li>
<li>the start days in the repeater in the original entry will be shifted
to past the last clone.</li>
</ul>
<p>
In this way you can spell out a number of instances of a repeating task,
and still retain the repeater to cover future instances of the task.
</p>

<p>
As described above, N+1 clones are produced when the original
subtree has a repeater.  Setting N to 0, then, can be used to
remove the repeater from a subtree and create a shifted clone
with the original repeater.
</p>
</blockquote>

<p>
For more, you can also consult:
</p>

<ul class="org-ul">
<li><a href="https://orgmode.org/manual/Structure-Editing.html#index-C_002dc-C_002dx-c">Entry in the Structure Editing docs</a></li>
<li><a href="https://emacs.ch/@dliden/112094606592802616">Mastodon discussion</a> on the topic, including some discussion of workarounds for the aforementioned limitations.</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2024-03-25 Mon 00:00</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</p>
</div>
</body>
</html>
